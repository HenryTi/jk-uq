ACT Picking (
	deliver ID,
) {
	WITH DxDeliverMain ID=deliver SET staff=$user;
};

ACT DonePickup (
	deliver ID,
	-- 实际拣货数量。
	ARR detail (
		id ID,					-- 
		quantity DEC(12,2),
	)
) {
	VAR warehouse ID;
	SET warehouse=a.warehouse FROM DeliverMain as a WHERE a.id=deliver;
	BUS JkOrderBus.[deliver-done] SET id=deliver;
	FOR detail {
		WITH DxDeliverDetail ID = id SET deliverDone=quantity;
		BUS JkOrderBus.[deliver-done] INTO detail ADD id=id, value=quantity;
	}
};
